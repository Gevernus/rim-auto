# Устранение проблем с видео файлами

## Проблема
Некоторые видео файлы не воспроизводятся в браузере из-за повреждений:
- `video_3.mp4` - содержит ошибки AAC аудио потока
- `video_1.mp4` - возможны аналогичные проблемы

## Решение

### 1. Перекодирование поврежденных файлов
Используйте FFmpeg для исправления:

```bash
# Исправление video_3.mp4
ffmpeg -i video_3.mp4 -c:v copy -c:a aac -strict experimental video_3_fixed.mp4

# Исправление video_1.mp4  
ffmpeg -i video_1.mp4 -c:v copy -c:a aac -strict experimental video_1_fixed.mp4
```

### 2. Альтернативное решение - пересжатие
```bash
# Полное пересжатие с новыми настройками
ffmpeg -i video_3.mp4 -c:v libx264 -preset medium -crf 23 -c:a aac -b:a 128k video_3_new.mp4
```

### 3. Проверка целостности
```bash
# Проверка файла
ffmpeg -v error -i video.mp4 -f null -

# Анализ метаданных
ffprobe -v quiet -print_format json -show_format -show_streams video.mp4
```

## Рекомендуемые настройки для новых видео

### Кодек видео
- **H.264/AVC** - High@L3.1 или ниже
- **Битрейт**: 1-2 Mbps для 720p
- **Профиль**: Main или High

### Кодек аудио  
- **AAC-LC** - 2 канала, 44.1 kHz
- **Битрейт**: 128-192 kbps

### Контейнер
- **MP4** с правильными метаданными
- **Без ошибок** в аудио потоке

## Текущие исправления в коде

### VideoPlayer.jsx
- ✅ Улучшенная обработка ошибок
- ✅ Проверка доступности файлов
- ✅ Fallback контент для поврежденных видео
- ✅ Детальное логирование ошибок

### VideoCarousel.jsx  
- ✅ Обработка ошибок отдельных видео
- ✅ Пропуск поврежденных файлов
- ✅ Fallback контент для карусели

### Страницы
- ✅ Обработчики ошибок в CatalogPage и MenuPage
- ✅ Fallback контент с постерами

## Мониторинг
Проверяйте консоль браузера на наличие ошибок:
```
Video load error: { src: "...", error: "Video decoding failed - file may be corrupted" }
```

## Приоритет исправления
1. **Высокий**: `video_3.mp4` - содержит критические ошибки AAC
2. **Средний**: `video_1.mp4` - проверить на аналогичные проблемы  
3. **Низкий**: `video_2.mp4` - работает корректно
